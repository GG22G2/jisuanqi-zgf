(function(){"use strict";let y=!1;self.onmessage=$=>{let t=$.data;if(y){let r=z.call(t.start,t.limit);self.postMessage({type:"r",result:r})}else{let r=t.data;z.setBaseData(r.playRecipes2,r.tempCalCache),y=!0}};class e{constructor(){this.playRecipes=null,this.start=0,this.groupScoreCacheNoIndex=null,this.groupMaxScore=null,this.groupMaxScoreChefIndex=null}static __static_initialize(){e.__static_initialized||(e.__static_initialized=!0,e.__static_initializer_0())}static disordePermuation_$LI$(){if(e.__static_initialize(),e.disordePermuation==null){e.disordePermuation=new Array(1680);for(let t=0;t<1680;t++)e.disordePermuation[t]=new Array(9).fill(0)}return e.disordePermuation}static __static_initializer_0(){const t=[0,1,2,3,4,5,6,7,8];e.permute(t,[0,0,0,0,0,0,0,0,0],[0,0,0],0)}setBaseData(t,r){this.playRecipes=t,this.groupScoreCacheNoIndex=r.groupScoreCacheNoIndex,this.groupMaxScore=r.groupMaxScore,this.groupMaxScoreChefIndex=r.groupMaxScoreChefIndex}call(t,r){let a=Date.now(),f=0,i=0,c,u,n,w=new Array(3),M=0,l={maxScore:0,maxScoreChefGroup:w,recipes:null,permuation:null};for(let m=t;m<r;m++){let _=(m-t)/(r-t)*100|0;_>M&&(self.postMessage({type:"p",p:_-M}),M=_);const o=this.playRecipes[m];for(let P=0;P<1680;P++){const s=e.disordePermuation_$LI$()[P];c=this.groupScoreCacheNoIndex[o[s[0]]][o[s[1]]]+(o[s[2]]-o[s[1]]-1),u=this.groupScoreCacheNoIndex[o[s[3]]][o[s[4]]]+(o[s[5]]-o[s[4]]-1),n=this.groupScoreCacheNoIndex[o[s[6]]][o[s[7]]]+(o[s[8]]-o[s[7]]-1),c=c*3,u=u*3,n=n*3;let g=this.groupMaxScore[c]+this.groupMaxScore[u]+this.groupMaxScore[n];if(g>i){let x=this.groupMaxScoreChefIndex[c],p=this.groupMaxScoreChefIndex[u],S=this.groupMaxScoreChefIndex[n];if(x!==p&&x!==S&&p!==S)i=g,l.maxScore=i,l.maxScoreChefGroup=[x,p,S],l.recipes=o,l.permuation=s;else for(let h=0;h<3;h++)for(let I=0;I<3;I++)for(let d=0;d<3;d++)g=this.groupMaxScore[c+h]+this.groupMaxScore[u+I]+this.groupMaxScore[n+d],x=this.groupMaxScoreChefIndex[c+h],p=this.groupMaxScoreChefIndex[u+I],S=this.groupMaxScoreChefIndex[n+d],g>i&&x!==p&&x!==S&&p!==S&&(i=g,l.maxScore=i,l.maxScoreChefGroup=[x,p,S],l.recipes=o,l.permuation=s)}}}return f=Date.now(),console.info(r-t+"组数据计算用时:"+(f-a)+"ms"),l}static permute(t,r,a,f){if(a[0]+a[1]+a[2]===9){for(let i=0;i<9;i++)e.disordePermuation_$LI$()[e.index][i]=r[i];e.index++;return}for(let i=0;i<3;i++)a[i]!==3&&(r[i*3+a[i]]=t[f],a[i]++,e.permute(t,r,a,f+1),a[i]--)}}e.__static_initialized=!1,e.index=0,e.disordePermuation_$LI$(),e.__static_initialize();let z=new e})();
